<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>掲示板アプリケーション</title>
<script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="article.js"></script>
</head>
<body>

<h1>掲示板アプリケーション</h1>

<form th:action="@{/bulletin-board/postarticle}" th:object="${articleForm}" method="post">
		<div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" style="color:red">エラー</div>
		投稿者名：<input type="text" name="name" th:field="*{name}"  ><br>
		<div th:if="${#fields.hasErrors('content')}" th:errors="*{content}" style="color:red">エラー</div>
		投稿内容：<br>
		<textarea name="content" rows="4" cols="40" th:field="*{content}" ></textarea><br>
		<input type="submit" value="記事投稿">
	</form>
	<hr>
	
	<div th:each="article:${articleList}">
		投稿者名：<span th:text="${article.name}">名無し</span><br>
		投稿内容：<span th:text="${article.content}">投稿内容</span><br>
		<form th:action="@{/bulletin-board/deletearticle}" method="post">
			<input type="hidden" name="id" th:value="${article.id}">
			<input type="submit" value="記事削除">
			
		<!-- いいねボタン実装 -->
			<button type="button" th:id="'like_button' + ${article.id}" th:onclick="'like(' + ${article.id} + ')'">いいね！</button>
			<span th:id="'likeCount' + ${article.id}">0</span>
		<!-- ここまで -->
		
		</form>
		<br>
		<div th:each="comment : ${article.commentList}">
			コメント者名：<span th:text="${comment.name}">コメント太郎</span><br>
			コメント内容：<span th:text="${comment.content}">コメント投稿内容</span>
		</div>
		<form th:action="@{/bulletin-board/postcomment}" th:object="${commentForm}" method="post">
			<input type="hidden" name="articleId" th:value="${article.id}">
			<div th:if="${article.id == commentForm.articleId}">
				<div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"  style="color:red">エラー！</div>
			</div>
			名前:<br>
			<input type="text" name="name"  th:if="${article.id == commentForm.articleId}">
			<input type="text" name="name"  th:unless="${article.id == commentForm.articleId}"><br>
			<div th:if="${article.id == commentForm.articleId}">
				<div th:if="${#fields.hasErrors('content')}" th:errors="*{content}" style="color:red">エラー！</div>
			</div>
			コメント:<br>
			<textarea name="content" th:field="*{content}"  rows="5" cols="40">コメント投稿内容</textarea><br>
			<input type="submit" value="コメント投稿" >
		</form>
		<hr>
	</div>
</body>
</html>